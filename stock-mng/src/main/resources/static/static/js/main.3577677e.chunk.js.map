{"version":3,"sources":["Number.js","StockItem.js","Balance.js","UserName.js","Service.js","App.js","index.js"],"names":["normalizeVal","val","Math","min","max","Number","onChange","e","value","target","isNaN","parseInt","_this","props","increment","delta","_this2","this","react_default","a","createElement","className","es_button","disabled","shape","onClick","icon","type","input","Component","noop","StockItem","context","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","order","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","setState","loading","onOrder","state","orderCount","t0","stop","classnames","stock-item","enlarged","hidden","onEnlarge","onShrink","name","price","toFixed","spin","size","ownedCount","stockCount","src_Number","popconfirm","placement","title","concat","onConfirm","item-description","description","dangerouslySetInnerHTML","__html","style","opacity","Balance","updateCurrent","current","balance","abs","setInterval","replace","UserName","switchUser","localStorage","window","location","reload","userName","tooltip","assertResult","result","success","Error","getBackendUrl","path","backendUrl","origin","endsWith","substr","length","startsWith","Service","createUser","_createUser","axios","post","sent","data","message","error","_x","apply","arguments","query","_query","_callee2","_context2","abrupt","_x2","queryBalance","_queryBalance","_callee3","_context3","_x3","purchase","_purchase","_callee4","productCode","count","_context4","_x4","_x5","_x6","Header","Layout","Content","Footer","App","resizeHandler","recalcEnlargedElementStyle","refreshStockItems","items","forEach","item","stockItems","refreshBalance","_ref3","enlargedProductCode","initUser","addEventListener","removeEventListener","layout","padding","breadcrumb","margin","Item","src_UserName","background","minHeight","id","map","src_StockItem","key","src_Balance","textAlign","_this3","list","document","getElementById","listRect","getBoundingClientRect","enlargeIndex","styleToApply","i","children","rect","indexOf","marginTop","y","marginBottom","height","width","keys","TRANSITION_DURATION_TEXT","body","clientHeight","CONTAINER_PADDING","setTimeout","uuid","hash","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.3577677e.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport {Button, Icon, Input} from 'antd';\n\nconst normalizeVal = val => Math.min(99, Math.max(0, val));\n\nfunction isInteger(value) {\n    return !isNaN(value) && parseInt(value) === +value;\n}\n\nclass Number extends Component {\n    onChange = e => {\n        if (!e.target.value) {\n            this.props.onChange(0);\n            return;\n        }\n        if (!isInteger(e.target.value)) {\n            return;\n        }\n        this.props.onChange(normalizeVal(+e.target.value));\n    };\n\n    increment = (delta) => {\n        let val = this.props.value + delta;\n        if (isNaN(val)) {\n            val = 0;\n        }\n        this.props.onChange(normalizeVal(val));\n    };\n\n    render() {\n        return <div className=\"number-component\">\n            <Button disabled={this.props.disabled} shape=\"circle\" onClick={() => this.increment(-1)}><Icon\n                type=\"minus\"/></Button>\n            <span>\n                <Input disabled={this.props.disabled} className=\"input\" value={this.props.value}\n                       onChange={this.onChange}/>\n            </span>\n            <Button disabled={this.props.disabled} shape=\"circle\" onClick={() => this.increment(1)}><Icon type=\"plus\"/></Button>\n        </div>\n    }\n\n}\n\nexport default Number;","import React, {Component} from 'react';\nimport classnames from \"classnames\";\nimport {Button, Popconfirm, Spin, Icon} from 'antd';\nimport Number from \"./Number\";\n\nconst noop = () => {\n};\n\nclass StockItem extends Component {\n\n    order = async () => {\n        this.setState({loading: true});\n        try {\n            await this.props.onOrder(this.state.orderCount);\n        } catch {\n        }\n        this.setState({orderCount: 0, loading: false});\n    };\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n            orderCount: 0,\n            loading: false,\n        };\n    }\n\n    render() {\n        return <div className={\n            classnames({\n                \"stock-item\": true,\n                \"enlarged\": this.props.enlarged,\n                \"hidden\": this.props.hidden,\n            })\n        }>\n            <div className=\"main\">\n                <div className=\"name\" onClick={this.props.enlarged ? noop : this.props.onEnlarge}>\n                    <span className={\"return-icon\"} onClick={this.props.enlarged ? this.props.onShrink : noop}>\n                        <Icon type=\"arrow-left\"/>\n                    </span> {this.props.name}\n                </div>\n                <div className=\"price\">\n                    单价: ¥{(+this.props.price).toFixed(2)}\n                </div>\n                {this.props.loading ? <div className=\"purchased\">\n                        &nbsp;\n                        <Spin size=\"small\"/>\n                    </div> :\n                    <div className=\"purchased\">\n                        已购: {this.props.ownedCount || 0} 件\n                        {this.props.stockCount >= 0 &&\n                        <span className=\"stock-count\">库存{this.props.stockCount || 0}件</span>}\n                    </div>}\n            </div>\n            <div className=\"side\">\n                <Number value={this.state.orderCount}\n                        onChange={orderCount => this.setState({orderCount})}\n                        disabled={this.state.loading}\n                />\n                <Popconfirm\n                    placement={\"left\"}\n                    title={`确定要订购${this.state.orderCount}件 ${this.props.name} 吗？ (总价${(this.state.orderCount * this.props.price).toFixed(2)}元)`}\n                    className={!this.state.orderCount ? \"disabled\" : \"\"}\n                    onConfirm={this.order}\n                >\n                    <Button\n                        className=\"purchase-button\"\n                        type={\"primary\"}\n                        disabled={!this.state.orderCount}\n                        loading={this.state.loading}>订购</Button>\n                </Popconfirm>\n            </div>\n\n            <div className={classnames({\"hidden\": !this.props.enlarged, \"item-description\": true})}>\n                {!!this.props.description ?\n                    <div dangerouslySetInnerHTML={{__html: this.props.description}}/>\n                    :\n                    <div style={{opacity: 0.7}}>\n                        商品暂无详细说明\n                    </div>}\n            </div>\n        </div>\n    }\n}\n\nexport default StockItem;","import React, {Component} from 'react';\n\nclass Balance extends Component {\n\n    updateCurrent = () => {\n        if (this.state.current === this.props.balance) {\n            return;\n        }\n        if (Math.abs(this.state.current - this.props.balance) < 0.01) {\n            this.setState({\n                current: this.props.balance\n            })\n        } else {\n            this.setState({\n                current: this.state.current + (this.props.balance - this.state.current) / 10\n            })\n        }\n    };\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {current: this.props.balance};\n\n        setInterval(this.updateCurrent, 10);\n    }\n\n    render() {\n        return <div className=\"balance-component\">\n            可用余额 {this.props.balance === null ? <span>...</span> :\n            <span>¥ {(+this.state.current).toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g, '$&,')}</span>}\n        </div>\n    }\n\n}\n\nexport default Balance;","import React, {Component} from 'react';\nimport {Icon, Popconfirm, Tooltip} from \"antd\";\n\nclass UserName extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n            userName: localStorage['userName']\n        };\n        setInterval(() => {\n            this.setState({userName: localStorage['userName']})\n        }, 1000);\n    }\n\n    switchUser = () => {\n        delete localStorage[\"userName\"];\n        window.location.reload();\n    };\n\n    render() {\n        if (!this.state.userName) {\n            return null;\n        }\n        return <div className=\"username-display\">\n            <Icon type=\"user\"/>\n            <Tooltip title={\"用户标识符: \" + this.state.userName} placement={\"bottomRight\"}>\n                <span className='username-text'>{this.state.userName}</span>\n            </Tooltip>\n            <Popconfirm\n                placement={\"topLeft\"}\n                title={`确定要切换用户吗`}\n                onConfirm={this.switchUser}\n            >\n                <Icon type=\"reload\" className=\"reload-btn\"/>\n            </Popconfirm>\n        </div>\n    }\n}\n\nexport default UserName;","import axios from 'axios';\nimport {message} from \"antd\";\n\nwindow.backendUrl = window.backendUrl || \"/\";\n\nfunction assertResult(result) {\n    if (result.success === false) {\n        throw new Error(\"result.success===false\");\n    }\n}\n\nfunction getBackendUrl(path) {\n    if (window.backendUrl === '/') {\n        window.backendUrl = window.location.origin;\n    }\n    if (window.backendUrl.endsWith(\"/\")) {\n        window.backendUrl = window.backendUrl.substr(0, window.backendUrl.length - 1);\n    }\n\n    if (!path.startsWith(\"/\")) {\n        path = \"/\" + path;\n    }\n\n    return window.backendUrl + path;\n}\n\nexport default {\n    async createUser(userName) {\n        try {\n            const result = (await axios.post(getBackendUrl(\"/createUser\"), {userName})).data;\n            assertResult(result);\n        } catch (e) {\n            message.error(\"Failed to create user: \" + e.message);\n            throw e;\n        }\n    },\n    async query(userName) {\n        try {\n            const result = (await axios.post(getBackendUrl(\"/query\"), {userName})).data;\n            assertResult(result);\n            return result;\n        } catch (e) {\n            message.error(\"Failed to query stock: \" + e.message);\n            throw e;\n        }\n    },\n    async queryBalance(userName) {\n        try {\n            const result = (await axios.post(getBackendUrl(\"/queryBalance\"), {userName})).data;\n            assertResult(result);\n            return result;\n        } catch (e) {\n            message.error(\"Failed to query balance: \" + e.message);\n            throw e;\n        }\n    },\n    async purchase(userName, productCode, count) {\n        try {\n            const result = (await axios.post(getBackendUrl(\"/purchase\"), {userName, productCode, count})).data;\n            assertResult(result);\n            return result;\n        } catch (e) {\n            message.error(\"Failed to purchase: \" + e.message);\n            throw e;\n        }\n    },\n}","import React, {Component} from 'react';\nimport {Breadcrumb, Layout, message, Spin} from 'antd';\nimport StockItem from \"./StockItem\";\nimport Balance from \"./Balance\";\nimport UserName from \"./UserName\";\nimport uuid from 'uuid/v4';\nimport Service from './Service'\n\nconst {Header, Content, Footer} = Layout;\n\nclass App extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {balance: null, stockItems: null, enlargedProductCode: null};\n    }\n\n    resizeHandler = () => {\n        if (this.recalcEnlargedElementStyle) {\n            this.recalcEnlargedElementStyle();\n        }\n    };\n\n    async componentDidMount() {\n        await App.initUser();\n        this.refreshBalance();\n        await this.refreshStockItems();\n\n        window.addEventListener(\"resize\", this.resizeHandler);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.resizeHandler);\n\n    }\n\n    refreshStockItems = async () => {\n        let items = await Service.query(localStorage[\"userName\"]);\n        items.forEach(item => item.loading = false);\n        this.setState({stockItems: items});\n    };\n\n    refreshBalance = async () => {\n        let result = await Service.queryBalance(localStorage[\"userName\"]);\n        this.setState({balance: result.balance});\n    };\n\n    onOrder = async (item, count) => {\n        await Service.purchase(localStorage[\"userName\"], item.productCode, count);\n        message.success(\"恭喜，订购成功\");\n        this.setState({balance: this.state.balance - item.price * count});\n        item.loading = true;\n        this.setState({});\n        this.refreshStockItems();\n        this.refreshBalance();\n    };\n\n    render() {\n        return (\n            <Layout className=\"layout\">\n                <Header>\n                    <div className=\"logo\">KubeCon DEMO</div>\n                </Header>\n                <Content style={{padding: '0 50px'}}>\n                    <Breadcrumb style={{margin: '16px 0'}}>\n                        <Breadcrumb.Item>Home</Breadcrumb.Item>\n                        <Breadcrumb.Item>库存管理</Breadcrumb.Item>\n                    </Breadcrumb>\n                    <UserName/>\n                    <div style={{background: '#fff', padding: 24, minHeight: 280}} id={\"stock-item-list\"}>\n                        {!this.state.stockItems && <div className=\"spin-div\"><Spin/></div>}\n                        {!!this.state.stockItems\n                        && this.state.stockItems.map(item =>\n                            <StockItem key={item.productCode}\n                                       name={item.name}\n                                       description={item.description}\n                                       ownedCount={item.ownedCount}\n                                       stockCount={item.stockCount}\n                                       price={item.price}\n                                       loading={item.loading}\n                                       enlarged={this.state.enlargedProductCode === item.productCode}\n                                       hidden={!!this.state.enlargedProductCode && this.state.enlargedProductCode !== item.productCode}\n                                       onEnlarge={() => this.onEnlarge(item.productCode)}\n                                       onShrink={() => this.onShrink()}\n                                       onOrder={(count) => this.onOrder(item, count)}/>)}\n                    </div>\n                </Content>\n\n                <Balance balance={this.state.balance}/>\n                <Footer style={{textAlign: 'center'}}>Alipay ©2019 / a KubeCon DEMO</Footer>\n            </Layout>\n        );\n    }\n\n    static async initUser() {\n        const userName = localStorage[\"userName\"];\n        if (!userName) {\n            let userName = uuid();\n            await Service.createUser(userName);\n            localStorage[\"userName\"] = userName;\n            // message.success(\"已成功初始化新的用户。\");\n        }\n    }\n\n    onEnlarge(productCode) {\n        this.setState({enlargedProductCode: productCode}, () => {\n            const CONTAINER_PADDING = 24;\n            const FOOTER_HEIGHT = 105;\n            const TRANSITION_DURATION = 350;\n            const list = document.getElementById(\"stock-item-list\");\n            const listRect = list.getBoundingClientRect();\n            let enlargeIndex = -1;\n            const styleToApply = {};\n            for (let i = 0; i < list.children.length; i++) {\n                let rect = list.children[i].getBoundingClientRect();\n                if (list.children[i].className.indexOf(\"enlarged\") >= 0) {\n                    enlargeIndex = i;\n                    let marginTop = rect.y - listRect.y - CONTAINER_PADDING;\n                    let marginBottom = listRect.y + listRect.height - rect.y - rect.height - CONTAINER_PADDING;\n                    styleToApply[i] = `margin-top:${marginTop}px;margin-bottom:${marginBottom}px;height:${rect.height}px;`;\n                } else if (list.children[i].className.indexOf(\"hidden\") >= 0) {\n                    styleToApply[i] = `position:absolute; width:${rect.width}px; top:${rect.y}px`;\n                }\n            }\n\n            Object.keys(styleToApply).forEach(key => {\n                list.children[key].style = styleToApply[key];\n            });\n\n            if (enlargeIndex >= 0) {\n                this.recalcEnlargedElementStyle = () => {\n                    const TRANSITION_DURATION_TEXT = (TRANSITION_DURATION / 1000).toFixed(2) + \"s\";\n                    let height = document.body.clientHeight - listRect.y - CONTAINER_PADDING * 2 - FOOTER_HEIGHT;\n                    list.children[enlargeIndex].style = `transition: opacity ${TRANSITION_DURATION_TEXT}, margin-top ${TRANSITION_DURATION_TEXT}, margin-bottom ${TRANSITION_DURATION_TEXT}, height ${TRANSITION_DURATION_TEXT};margin-top:0; margin-bottom:0; height:${height}px`;\n                };\n                setTimeout(this.recalcEnlargedElementStyle, TRANSITION_DURATION / 3);\n            }\n        });\n    }\n\n    onShrink() {\n        this.recalcEnlargedElementStyle = null;\n        const list = document.getElementById(\"stock-item-list\");\n        for (let i = 0; i < list.children.length; i++) {\n            list.children[i].style = \"\";\n        }\n        this.setState({enlargedProductCode: null});\n    }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\n\nif (window.location.hash === '#list') {\n    document.body.className = \"pure-list-mode\";\n}\n\nwindow.backendUrl = \"http://localhost:8080\";\n\nReactDOM.render(<App/>, document.getElementById('root'));\n"],"sourceRoot":""}