{"version":3,"sources":["Number.js","StockItem.js","Balance.js","Service.js","App.js","index.js"],"names":["normalizeVal","val","Math","min","max","Number","onChange","e","value","target","isNaN","parseInt","_this","props","increment","delta","_this2","this","react_default","a","createElement","className","es_button","disabled","shape","onClick","icon","type","input","Component","noop","StockItem","context","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","order","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","setState","loading","onOrder","state","orderCount","t0","stop","classnames","stock-item","enlarged","hidden","onEnlarge","onShrink","name","price","toFixed","spin","size","ownedCount","src_Number","popconfirm","placement","title","concat","onConfirm","item-description","description","dangerouslySetInnerHTML","__html","style","opacity","Balance","updateCurrent","current","balance","abs","setInterval","replace","assertResult","result","success","Error","getBackendUrl","path","window","backendUrl","location","origin","endsWith","substr","length","startsWith","Service","createUser","_createUser","userName","axios","post","sent","data","message","error","_x","apply","arguments","query","_query","_callee2","_context2","abrupt","_x2","queryBalance","_queryBalance","_callee3","_context3","_x3","purchase","_purchase","_callee4","productCode","count","_context4","_x4","_x5","_x6","Header","Layout","Content","Footer","App","resizeHandler","recalcEnlargedElementStyle","refreshStockItems","items","localStorage","forEach","item","stockItems","refreshBalance","_ref3","enlargedProductCode","initUser","addEventListener","removeEventListener","layout","padding","breadcrumb","margin","Item","background","minHeight","id","map","src_StockItem","key","src_Balance","textAlign","_this3","list","document","getElementById","listRect","getBoundingClientRect","enlargeIndex","styleToApply","i","children","rect","indexOf","marginTop","y","marginBottom","height","width","keys","TRANSITION_DURATION_TEXT","body","clientHeight","CONTAINER_PADDING","setTimeout","uuid","ReactDOM","render","src_App"],"mappings":"gWAGMA,EAAe,SAAAC,GAAG,OAAIC,KAAKC,IAAI,GAAID,KAAKE,IAAI,EAAGH,SAwCtCI,6MAjCXC,SAAW,SAAAC,GALf,IAAmBC,EAMND,EAAEE,OAAOD,OANHA,EAUID,EAAEE,OAAOD,MATpBE,MAAMF,IAAUG,SAASH,MAAYA,GAYzCI,EAAKC,MAAMP,SAASN,GAAcO,EAAEE,OAAOD,SANvCI,EAAKC,MAAMP,SAAS,MAS5BQ,UAAY,SAACC,GACT,IAAId,EAAMW,EAAKC,MAAML,MAAQO,EACzBL,MAAMT,KACNA,EAAM,GAEVW,EAAKC,MAAMP,SAASN,EAAaC,6EAG5B,IAAAe,EAAAC,KACL,OAAOC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBAClBH,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAQC,SAAUN,KAAKJ,MAAMU,SAAUC,MAAM,SAASC,QAAS,kBAAMT,EAAKF,WAAW,KAAII,EAAAC,EAAAC,cAACM,EAAA,EAAD,CACrFC,KAAK,WACTT,EAAAC,EAAAC,cAAA,YACIF,EAAAC,EAAAC,cAACQ,EAAA,EAAD,CAAOL,SAAUN,KAAKJ,MAAMU,SAAUF,UAAU,QAAQb,MAAOS,KAAKJ,MAAML,MACnEF,SAAUW,KAAKX,YAE1BY,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAQC,SAAUN,KAAKJ,MAAMU,SAAUC,MAAM,SAASC,QAAS,kBAAMT,EAAKF,UAAU,KAAII,EAAAC,EAAAC,cAACM,EAAA,EAAD,CAAMC,KAAK,kBA5B1FE,aCJfC,EAAO,aA8EEC,cAhEX,SAAAA,EAAYlB,EAAOmB,GAAS,IAAApB,EAAA,OAAAqB,OAAAC,EAAA,EAAAD,CAAAhB,KAAAc,IACxBnB,EAAAqB,OAAAE,EAAA,EAAAF,CAAAhB,KAAAgB,OAAAG,EAAA,EAAAH,CAAAF,GAAAM,KAAApB,KAAMJ,EAAOmB,KAVjBM,MAS4BL,OAAAM,EAAA,EAAAN,CAAAO,EAAArB,EAAAsB,KATpB,SAAAC,IAAA,OAAAF,EAAArB,EAAAwB,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACJlC,EAAKmC,SAAS,CAACC,SAAS,IADpBJ,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGMlC,EAAKC,MAAMoC,QAAQrC,EAAKsC,MAAMC,YAHpC,OAAAP,EAAAE,KAAA,eAAAF,EAAAC,KAAA,EAAAD,EAAAQ,GAAAR,EAAA,gBAMJhC,EAAKmC,SAAS,CAACI,WAAY,EAAGH,SAAS,IANnC,wBAAAJ,EAAAS,SAAAX,EAAA,iBAWJ9B,EAAKsC,MAAQ,CACTC,WAAY,EACZH,SAAS,GAJWpC,wEAQnB,IAAAI,EAAAC,KACL,OAAOC,EAAAC,EAAAC,cAAA,OAAKC,UACRiC,IAAW,CACPC,cAAc,EACdC,SAAYvC,KAAKJ,MAAM2C,SACvBC,OAAUxC,KAAKJ,MAAM4C,UAGzBvC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QACXH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OAAOI,QAASR,KAAKJ,MAAM2C,SAAW1B,EAAOb,KAAKJ,MAAM6C,WACnExC,EAAAC,EAAAC,cAAA,QAAMC,UAAW,cAAeI,QAASR,KAAKJ,MAAM2C,SAAWvC,KAAKJ,MAAM8C,SAAW7B,GACjFZ,EAAAC,EAAAC,cAACM,EAAA,EAAD,CAAMC,KAAK,gBAFnB,IAGaV,KAAKJ,MAAM+C,MAExB1C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SAAf,uBACYJ,KAAKJ,MAAMgD,MAAQ,KAAKC,QAAQ,IAE3C7C,KAAKJ,MAAMmC,QAAU9B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aAAf,OAEdH,EAAAC,EAAAC,cAAC2C,EAAA,EAAD,CAAMC,KAAK,WAEf9C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aAAf,iBACSJ,KAAKJ,MAAMoD,YAAc,EADlC,YAIR/C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QACXH,EAAAC,EAAAC,cAAC8C,EAAD,CAAQ1D,MAAOS,KAAKiC,MAAMC,WAClB7C,SAAU,SAAA6C,GAAU,OAAInC,EAAK+B,SAAS,CAACI,gBACvC5B,SAAUN,KAAKiC,MAAMF,UAE7B9B,EAAAC,EAAAC,cAAC+C,EAAA,EAAD,CACIC,UAAW,OACXC,MAAK,iCAAAC,OAAUrD,KAAKiC,MAAMC,WAArB,WAAAmB,OAAoCrD,KAAKJ,MAAM+C,KAA/C,+BAAAU,QAA8DrD,KAAKiC,MAAMC,WAAalC,KAAKJ,MAAMgD,MAAQ,KAAKC,QAAQ,GAAtH,WACLzC,UAAYJ,KAAKiC,MAAMC,WAA0B,GAAb,WACpCoB,UAAWtD,KAAKqB,OAEhBpB,EAAAC,EAAAC,cAACE,EAAA,EAAD,CACID,UAAU,kBACVM,KAAM,UACNJ,UAAWN,KAAKiC,MAAMC,WACtBH,QAAS/B,KAAKiC,MAAMF,SAJxB,kBAQR9B,EAAAC,EAAAC,cAAA,OAAKC,UAAWiC,IAAW,CAACG,QAAWxC,KAAKJ,MAAM2C,SAAUgB,oBAAoB,KACzEvD,KAAKJ,MAAM4D,YACVvD,EAAAC,EAAAC,cAAA,OAAKsD,wBAAyB,CAACC,OAAQ1D,KAAKJ,MAAM4D,eAElDvD,EAAAC,EAAAC,cAAA,OAAKwD,MAAO,CAACC,QAAS,KAAtB,6DAnEIhD,aC2BTiD,cAhBX,SAAAA,EAAYjE,EAAOmB,GAAS,IAAApB,EAAA,OAAAqB,OAAAC,EAAA,EAAAD,CAAAhB,KAAA6D,IACxBlE,EAAAqB,OAAAE,EAAA,EAAAF,CAAAhB,KAAAgB,OAAAG,EAAA,EAAAH,CAAA6C,GAAAzC,KAAApB,KAAMJ,EAAOmB,KAhBjB+C,cAAgB,WACRnE,EAAKsC,MAAM8B,UAAYpE,EAAKC,MAAMoE,UAGlC/E,KAAKgF,IAAItE,EAAKsC,MAAM8B,QAAUpE,EAAKC,MAAMoE,SAAW,IACpDrE,EAAKmC,SAAS,CACViC,QAASpE,EAAKC,MAAMoE,UAGxBrE,EAAKmC,SAAS,CACViC,QAASpE,EAAKsC,MAAM8B,SAAWpE,EAAKC,MAAMoE,QAAUrE,EAAKsC,MAAM8B,SAAW,OAOlFpE,EAAKsC,MAAQ,CAAC8B,QAASpE,EAAKC,MAAMoE,SAElCE,YAAYvE,EAAKmE,cAAe,IAJRnE,wEAQxB,OAAOM,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBAAf,4BAC0B,OAAvBJ,KAAKJ,MAAMoE,QAAmB/D,EAAAC,EAAAC,cAAA,mBACpCF,EAAAC,EAAAC,cAAA,sBAAWH,KAAKiC,MAAM8B,QAAU,KAAKlB,QAAQ,GAAGsB,QAAQ,oBAAqB,gBA3BnEvD,gDCGtB,SAASwD,EAAaC,GAClB,IAAuB,IAAnBA,EAAOC,QACP,MAAM,IAAIC,MAAM,0BAIxB,SAASC,EAAcC,GAYnB,MAX0B,MAAtBC,OAAOC,aACPD,OAAOC,WAAaD,OAAOE,SAASC,QAEpCH,OAAOC,WAAWG,SAAS,OAC3BJ,OAAOC,WAAaD,OAAOC,WAAWI,OAAO,EAAGL,OAAOC,WAAWK,OAAS,IAG1EP,EAAKQ,WAAW,OACjBR,EAAO,IAAMA,GAGVC,OAAOC,WAAaF,EApB/BC,OAAOC,WAAaD,OAAOC,YAAc,IAuB1B,IAAAO,EAAA,CACLC,WADK,eAAAC,EAAApE,OAAAM,EAAA,EAAAN,CAAAO,EAAArB,EAAAsB,KAAA,SAAAC,EACM4D,GADN,OAAA9D,EAAArB,EAAAwB,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGmByD,IAAMC,KAAKf,EAAc,eAAgB,CAACa,aAH7D,OAIHjB,EAJGzC,EAAA6D,KAGyEC,MAHzE9D,EAAAE,KAAA,sBAAAF,EAAAC,KAAA,EAAAD,EAAAQ,GAAAR,EAAA,SAMH+D,IAAQC,MAAM,0BAA4BhE,EAAAQ,GAAEuD,SANzC/D,EAAAQ,GAAA,yBAAAR,EAAAS,SAAAX,EAAA,iCAAAmE,GAAA,OAAAR,EAAAS,MAAA7F,KAAA8F,YAAA,GAULC,MAVK,eAAAC,EAAAhF,OAAAM,EAAA,EAAAN,CAAAO,EAAArB,EAAAsB,KAAA,SAAAyE,EAUCZ,GAVD,IAAAhB,EAAA,OAAA9C,EAAArB,EAAAwB,KAAA,SAAAwE,GAAA,cAAAA,EAAAtE,KAAAsE,EAAArE,MAAA,cAAAqE,EAAAtE,KAAA,EAAAsE,EAAArE,KAAA,EAYmByD,IAAMC,KAAKf,EAAc,UAAW,CAACa,aAZxD,cAaHjB,EADMC,EAZH6B,EAAAV,KAYoEC,MAZpES,EAAAC,OAAA,SAcI9B,GAdJ,aAAA6B,EAAAtE,KAAA,EAAAsE,EAAA/D,GAAA+D,EAAA,SAgBHR,IAAQC,MAAM,0BAA4BO,EAAA/D,GAAEuD,SAhBzCQ,EAAA/D,GAAA,yBAAA+D,EAAA9D,SAAA6D,EAAA,iCAAAG,GAAA,OAAAJ,EAAAH,MAAA7F,KAAA8F,YAAA,GAoBLO,aApBK,eAAAC,EAAAtF,OAAAM,EAAA,EAAAN,CAAAO,EAAArB,EAAAsB,KAAA,SAAA+E,EAoBQlB,GApBR,IAAAhB,EAAA,OAAA9C,EAAArB,EAAAwB,KAAA,SAAA8E,GAAA,cAAAA,EAAA5E,KAAA4E,EAAA3E,MAAA,cAAA2E,EAAA5E,KAAA,EAAA4E,EAAA3E,KAAA,EAsBmByD,IAAMC,KAAKf,EAAc,iBAAkB,CAACa,aAtB/D,cAuBHjB,EADMC,EAtBHmC,EAAAhB,KAsB2EC,MAtB3Ee,EAAAL,OAAA,SAwBI9B,GAxBJ,aAAAmC,EAAA5E,KAAA,EAAA4E,EAAArE,GAAAqE,EAAA,SA0BHd,IAAQC,MAAM,4BAA8Ba,EAAArE,GAAEuD,SA1B3Cc,EAAArE,GAAA,yBAAAqE,EAAApE,SAAAmE,EAAA,iCAAAE,GAAA,OAAAH,EAAAT,MAAA7F,KAAA8F,YAAA,GA8BLY,SA9BK,eAAAC,EAAA3F,OAAAM,EAAA,EAAAN,CAAAO,EAAArB,EAAAsB,KAAA,SAAAoF,EA8BIvB,EAAUwB,EAAaC,GA9B3B,IAAAzC,EAAA,OAAA9C,EAAArB,EAAAwB,KAAA,SAAAqF,GAAA,cAAAA,EAAAnF,KAAAmF,EAAAlF,MAAA,cAAAkF,EAAAnF,KAAA,EAAAmF,EAAAlF,KAAA,EAgCmByD,IAAMC,KAAKf,EAAc,aAAc,CAACa,WAAUwB,cAAaC,UAhClF,cAiCH1C,EADMC,EAhCH0C,EAAAvB,KAgC2FC,MAhC3FsB,EAAAZ,OAAA,SAkCI9B,GAlCJ,aAAA0C,EAAAnF,KAAA,EAAAmF,EAAA5E,GAAA4E,EAAA,SAoCHrB,IAAQC,MAAM,uBAAyBoB,EAAA5E,GAAEuD,SApCtCqB,EAAA5E,GAAA,yBAAA4E,EAAA3E,SAAAwE,EAAA,iCAAAI,EAAAC,EAAAC,GAAA,OAAAP,EAAAd,MAAA7F,KAAA8F,YAAA,ICnBRqB,EAA2BC,IAA3BD,OAAQE,EAAmBD,IAAnBC,QAASC,EAAUF,IAAVE,OAmJTC,cA/IX,SAAAA,EAAY3H,EAAOmB,GAAS,IAAApB,EAAA,OAAAqB,OAAAC,EAAA,EAAAD,CAAAhB,KAAAuH,IACxB5H,EAAAqB,OAAAE,EAAA,EAAAF,CAAAhB,KAAAgB,OAAAG,EAAA,EAAAH,CAAAuG,GAAAnG,KAAApB,KAAMJ,EAAOmB,KAUjByG,cAAgB,WACR7H,EAAK8H,4BACL9H,EAAK8H,8BAbe9H,EA8B5B+H,kBA9B4B1G,OAAAM,EAAA,EAAAN,CAAAO,EAAArB,EAAAsB,KA8BR,SAAAC,IAAA,IAAAkG,EAAA,OAAApG,EAAArB,EAAAwB,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACEqD,EAAQa,MAAM6B,aAAY,UAD5B,QACZD,EADYhG,EAAA6D,MAEVqC,QAAQ,SAAAC,GAAI,OAAIA,EAAK/F,SAAU,IACrCpC,EAAKmC,SAAS,CAACiG,WAAYJ,IAHX,wBAAAhG,EAAAS,SAAAX,MA9BQ9B,EAoC5BqI,eApC4BhH,OAAAM,EAAA,EAAAN,CAAAO,EAAArB,EAAAsB,KAoCX,SAAAyE,IAAA,IAAA5B,EAAA,OAAA9C,EAAArB,EAAAwB,KAAA,SAAAwE,GAAA,cAAAA,EAAAtE,KAAAsE,EAAArE,MAAA,cAAAqE,EAAArE,KAAA,EACMqD,EAAQmB,aAAauB,aAAY,UADvC,OACTvD,EADS6B,EAAAV,KAEb7F,EAAKmC,SAAS,CAACkC,QAASK,EAAOL,UAFlB,wBAAAkC,EAAA9D,SAAA6D,MApCWtG,EAyC5BqC,QAzC4B,eAAAiG,EAAAjH,OAAAM,EAAA,EAAAN,CAAAO,EAAArB,EAAAsB,KAyClB,SAAA+E,EAAOuB,EAAMhB,GAAb,OAAAvF,EAAArB,EAAAwB,KAAA,SAAA8E,GAAA,cAAAA,EAAA5E,KAAA4E,EAAA3E,MAAA,cAAA2E,EAAA3E,KAAA,EACAqD,EAAQwB,SAASkB,aAAY,SAAcE,EAAKjB,YAAaC,GAD7D,OAENpB,IAAQpB,QAAQ,8CAChB3E,EAAKmC,SAAS,CAACkC,QAASrE,EAAKsC,MAAM+B,QAAU8D,EAAKlF,MAAQkE,IAC1DgB,EAAK9E,YAAc8D,EACnBgB,EAAK/F,SAAU,EACfpC,EAAKmC,SAAS,IACdnC,EAAK+H,oBACL/H,EAAKqI,iBARC,wBAAAxB,EAAApE,SAAAmE,MAzCkB,gBAAAX,EAAAQ,GAAA,OAAA6B,EAAApC,MAAA7F,KAAA8F,YAAA,GAExBnG,EAAKsC,MAAQ,CAAC+B,QAAS,KAAM+D,WAAY,KAAMG,oBAAqB,MAGpEhE,YAAY,WACRvE,EAAK+H,oBACL/H,EAAKqI,kBACN,KARqBrI,2MAkBlB4H,EAAIY,yBACVnI,KAAKgI,0BACChI,KAAK0H,2BAEXhD,OAAO0D,iBAAiB,SAAUpI,KAAKwH,gKAIvC9C,OAAO2D,oBAAoB,SAAUrI,KAAKwH,gDA0BrC,IAAAzH,EAAAC,KACL,OACIC,EAAAC,EAAAC,cAACmI,EAAA,EAAD,CAAQlI,UAAU,UACdH,EAAAC,EAAAC,cAACgH,EAAD,KACIlH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QAAf,iBAEJH,EAAAC,EAAAC,cAACkH,EAAD,CAAS1D,MAAO,CAAC4E,QAAS,WACtBtI,EAAAC,EAAAC,cAACqI,EAAA,EAAD,CAAY7E,MAAO,CAAC8E,OAAQ,WACxBxI,EAAAC,EAAAC,cAACqI,EAAA,EAAWE,KAAZ,aACAzI,EAAAC,EAAAC,cAACqI,EAAA,EAAWE,KAAZ,kCAEJzI,EAAAC,EAAAC,cAAA,OAAKwD,MAAO,CAACgF,WAAY,OAAQJ,QAAS,GAAIK,UAAW,KAAMC,GAAI,oBAC7D7I,KAAKiC,MAAM8F,YAAc9H,EAAAC,EAAAC,cAAA,OAAKC,UAAU,YAAWH,EAAAC,EAAAC,cAAC2C,EAAA,EAAD,SAClD9C,KAAKiC,MAAM8F,YACX/H,KAAKiC,MAAM8F,WAAWe,IAAI,SAAAhB,GAAI,OAC7B7H,EAAAC,EAAAC,cAAC4I,EAAD,CAAWC,IAAKlB,EAAKjB,YACVlE,KAAMmF,EAAKnF,KACXa,YAAasE,EAAKtE,YAClBR,WAAY8E,EAAK9E,WACjBJ,MAAOkF,EAAKlF,MACZb,QAAS+F,EAAK/F,QACdQ,SAAUxC,EAAKkC,MAAMiG,sBAAwBJ,EAAKjB,YAClDrE,SAAUzC,EAAKkC,MAAMiG,qBAAuBnI,EAAKkC,MAAMiG,sBAAwBJ,EAAKjB,YACpFpE,UAAW,kBAAM1C,EAAK0C,UAAUqF,EAAKjB,cACrCnE,SAAU,kBAAM3C,EAAK2C,YACrBV,QAAS,SAAC8E,GAAD,OAAW/G,EAAKiC,QAAQ8F,EAAMhB,UAI9D7G,EAAAC,EAAAC,cAAC8I,EAAD,CAASjF,QAAShE,KAAKiC,MAAM+B,UAC7B/D,EAAAC,EAAAC,cAACmH,EAAD,CAAQ3D,MAAO,CAACuF,UAAW,WAA3B,uEAeFrC,GAAa,IAAAsC,EAAAnJ,KACnBA,KAAK8B,SAAS,CAACoG,oBAAqBrB,GAAc,WAQ9C,IAPA,IAGMuC,EAAOC,SAASC,eAAe,mBAC/BC,EAAWH,EAAKI,wBAClBC,GAAgB,EACdC,EAAe,GACZC,EAAI,EAAGA,EAAIP,EAAKQ,SAAS5E,OAAQ2E,IAAK,CAC3C,IAAIE,EAAOT,EAAKQ,SAASD,GAAGH,wBAC5B,GAAIJ,EAAKQ,SAASD,GAAGvJ,UAAU0J,QAAQ,aAAe,EAAG,CACrDL,EAAeE,EACf,IAAII,EAAYF,EAAKG,EAAIT,EAASS,EAXhB,GAYdC,EAAeV,EAASS,EAAIT,EAASW,OAASL,EAAKG,EAAIH,EAAKK,OAZ9C,GAalBR,EAAaC,GAAb,cAAAtG,OAAgC0G,EAAhC,qBAAA1G,OAA6D4G,EAA7D,cAAA5G,OAAsFwG,EAAKK,OAA3F,YACOd,EAAKQ,SAASD,GAAGvJ,UAAU0J,QAAQ,WAAa,IACvDJ,EAAaC,GAAb,4BAAAtG,OAA8CwG,EAAKM,MAAnD,YAAA9G,OAAmEwG,EAAKG,EAAxE,OAIRhJ,OAAOoJ,KAAKV,GAAc7B,QAAQ,SAAAmB,GAC9BI,EAAKQ,SAASZ,GAAKrF,MAAQ+F,EAAaV,KAGxCS,GAAgB,IAChBN,EAAK1B,2BAA6B,WAC9B,IAAM4C,EAA2B,IAA6BxH,QAAQ,GAAK,IACvEqH,EAASb,SAASiB,KAAKC,aAAehB,EAASS,EAAIQ,GAzBzC,IA0BdpB,EAAKQ,SAASH,GAAc9F,MAA5B,uBAAAN,OAA2DgH,EAA3D,iBAAAhH,OAAmGgH,EAAnG,oBAAAhH,OAA8IgH,EAA9I,aAAAhH,OAAkLgH,EAAlL,2CAAAhH,OAAoP6G,EAApP,OAEJO,WAAWtB,EAAK1B,2BA3BQ,IA2B0C,yCAM1EzH,KAAKyH,2BAA6B,KAElC,IADA,IAAM2B,EAAOC,SAASC,eAAe,mBAC5BK,EAAI,EAAGA,EAAIP,EAAKQ,SAAS5E,OAAQ2E,IACtCP,EAAKQ,SAASD,GAAGhG,MAAQ,GAE7B3D,KAAK8B,SAAS,CAACoG,oBAAqB,6JAnDnBN,aAAY,gCAErBvC,EAAWqF,eACTxF,EAAQC,WAAWE,UACzBuC,aAAY,SAAevC,sGA9FrBzE,aCJlB+J,IAASC,OAAO3K,EAAAC,EAAAC,cAAC0K,EAAD,MAASxB,SAASC,eAAe","file":"static/js/main.85ffd981.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport {Button, Icon, Input} from 'antd';\n\nconst normalizeVal = val => Math.min(99, Math.max(0, val));\n\nfunction isInteger(value) {\n    return !isNaN(value) && parseInt(value) === +value;\n}\n\nclass Number extends Component {\n    onChange = e => {\n        if (!e.target.value) {\n            this.props.onChange(0);\n            return;\n        }\n        if (!isInteger(e.target.value)) {\n            return;\n        }\n        this.props.onChange(normalizeVal(+e.target.value));\n    };\n\n    increment = (delta) => {\n        let val = this.props.value + delta;\n        if (isNaN(val)) {\n            val = 0;\n        }\n        this.props.onChange(normalizeVal(val));\n    };\n\n    render() {\n        return <div className=\"number-component\">\n            <Button disabled={this.props.disabled} shape=\"circle\" onClick={() => this.increment(-1)}><Icon\n                type=\"minus\"/></Button>\n            <span>\n                <Input disabled={this.props.disabled} className=\"input\" value={this.props.value}\n                       onChange={this.onChange}/>\n            </span>\n            <Button disabled={this.props.disabled} shape=\"circle\" onClick={() => this.increment(1)}><Icon type=\"plus\"/></Button>\n        </div>\n    }\n\n}\n\nexport default Number;","import React, {Component} from 'react';\nimport classnames from \"classnames\";\nimport {Button, Popconfirm, Spin, Icon} from 'antd';\nimport Number from \"./Number\";\n\nconst noop = () => {\n};\n\nclass StockItem extends Component {\n\n    order = async () => {\n        this.setState({loading: true});\n        try {\n            await this.props.onOrder(this.state.orderCount);\n        } catch {\n        }\n        this.setState({orderCount: 0, loading: false});\n    };\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n            orderCount: 0,\n            loading: false,\n        };\n    }\n\n    render() {\n        return <div className={\n            classnames({\n                \"stock-item\": true,\n                \"enlarged\": this.props.enlarged,\n                \"hidden\": this.props.hidden,\n            })\n        }>\n            <div className=\"main\">\n                <div className=\"name\" onClick={this.props.enlarged ? noop : this.props.onEnlarge}>\n                    <span className={\"return-icon\"} onClick={this.props.enlarged ? this.props.onShrink : noop}>\n                        <Icon type=\"arrow-left\"/>\n                    </span> {this.props.name}\n                </div>\n                <div className=\"price\">\n                    单价: ¥{(+this.props.price / 100).toFixed(2)}\n                </div>\n                {this.props.loading ? <div className=\"purchased\">\n                        &nbsp;\n                        <Spin size=\"small\"/>\n                    </div> :\n                    <div className=\"purchased\">\n                        已购: {this.props.ownedCount || 0} 件\n                    </div>}\n            </div>\n            <div className=\"side\">\n                <Number value={this.state.orderCount}\n                        onChange={orderCount => this.setState({orderCount})}\n                        disabled={this.state.loading}\n                />\n                <Popconfirm\n                    placement={\"left\"}\n                    title={`确定要订购${this.state.orderCount}件 ${this.props.name} 吗？ (总价${(this.state.orderCount * this.props.price / 100).toFixed(2)}元)`}\n                    className={!this.state.orderCount ? \"disabled\" : \"\"}\n                    onConfirm={this.order}\n                >\n                    <Button\n                        className=\"purchase-button\"\n                        type={\"primary\"}\n                        disabled={!this.state.orderCount}\n                        loading={this.state.loading}>订购</Button>\n                </Popconfirm>\n            </div>\n\n            <div className={classnames({\"hidden\": !this.props.enlarged, \"item-description\": true})}>\n                {!!this.props.description ?\n                    <div dangerouslySetInnerHTML={{__html: this.props.description}}/>\n                    :\n                    <div style={{opacity: 0.7}}>\n                        商品暂无详细说明\n                    </div>}\n            </div>\n        </div>\n    }\n}\n\nexport default StockItem;","import React, {Component} from 'react';\n\nclass Balance extends Component {\n\n    updateCurrent = () => {\n        if (this.state.current === this.props.balance) {\n            return;\n        }\n        if (Math.abs(this.state.current - this.props.balance) < 0.01) {\n            this.setState({\n                current: this.props.balance\n            })\n        } else {\n            this.setState({\n                current: this.state.current + (this.props.balance - this.state.current) / 10\n            })\n        }\n    };\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {current: this.props.balance};\n\n        setInterval(this.updateCurrent, 10);\n    }\n\n    render() {\n        return <div className=\"balance-component\">\n            可用余额 {this.props.balance === null ? <span>...</span> :\n            <span>¥ {(+this.state.current / 100).toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g, '$&,')}</span>}\n        </div>\n    }\n\n}\n\nexport default Balance;","import axios from 'axios';\nimport {message} from \"antd\";\n\nwindow.backendUrl = window.backendUrl || \"/\";\n\nfunction assertResult(result) {\n    if (result.success === false) {\n        throw new Error(\"result.success===false\");\n    }\n}\n\nfunction getBackendUrl(path) {\n    if (window.backendUrl === '/') {\n        window.backendUrl = window.location.origin;\n    }\n    if (window.backendUrl.endsWith(\"/\")) {\n        window.backendUrl = window.backendUrl.substr(0, window.backendUrl.length - 1);\n    }\n\n    if (!path.startsWith(\"/\")) {\n        path = \"/\" + path;\n    }\n\n    return window.backendUrl + path;\n}\n\nexport default {\n    async createUser(userName) {\n        try {\n            const result = (await axios.post(getBackendUrl(\"/createUser\"), {userName})).data;\n            assertResult(result);\n        } catch (e) {\n            message.error(\"Failed to create user: \" + e.message);\n            throw e;\n        }\n    },\n    async query(userName) {\n        try {\n            const result = (await axios.post(getBackendUrl(\"/query\"), {userName})).data;\n            assertResult(result);\n            return result;\n        } catch (e) {\n            message.error(\"Failed to query stock: \" + e.message);\n            throw e;\n        }\n    },\n    async queryBalance(userName) {\n        try {\n            const result = (await axios.post(getBackendUrl(\"/queryBalance\"), {userName})).data;\n            assertResult(result);\n            return result;\n        } catch (e) {\n            message.error(\"Failed to query balance: \" + e.message);\n            throw e;\n        }\n    },\n    async purchase(userName, productCode, count) {\n        try {\n            const result = (await axios.post(getBackendUrl(\"/purchase\"), {userName, productCode, count})).data;\n            assertResult(result);\n            return result;\n        } catch (e) {\n            message.error(\"Failed to purchase: \" + e.message);\n            throw e;\n        }\n    },\n}","import React, {Component} from 'react';\nimport {Breadcrumb, Layout, message, Spin} from 'antd';\nimport StockItem from \"./StockItem\";\nimport Balance from \"./Balance\";\nimport uuid from 'uuid/v4';\nimport Service from './Service'\n\nconst {Header, Content, Footer} = Layout;\n\nclass App extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {balance: null, stockItems: null, enlargedProductCode: null};\n\n        // auto refresher\n        setInterval(() => {\n            this.refreshStockItems();\n            this.refreshBalance();\n        }, 3000);\n    }\n\n    resizeHandler = () => {\n        if (this.recalcEnlargedElementStyle) {\n            this.recalcEnlargedElementStyle();\n        }\n    };\n\n    async componentDidMount() {\n        await App.initUser();\n        this.refreshBalance();\n        await this.refreshStockItems();\n\n        window.addEventListener(\"resize\", this.resizeHandler);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.resizeHandler);\n\n    }\n\n    refreshStockItems = async () => {\n        let items = await Service.query(localStorage[\"userName\"]);\n        items.forEach(item => item.loading = false);\n        this.setState({stockItems: items});\n    };\n\n    refreshBalance = async () => {\n        let result = await Service.queryBalance(localStorage[\"userName\"]);\n        this.setState({balance: result.balance});\n    };\n\n    onOrder = async (item, count) => {\n        await Service.purchase(localStorage[\"userName\"], item.productCode, count);\n        message.success(\"恭喜，订购成功\");\n        this.setState({balance: this.state.balance - item.price * count});\n        item.ownedCount += count;\n        item.loading = true;\n        this.setState({});\n        this.refreshStockItems();\n        this.refreshBalance();\n    };\n\n    render() {\n        return (\n            <Layout className=\"layout\">\n                <Header>\n                    <div className=\"logo\">KubeCon DEMO</div>\n                </Header>\n                <Content style={{padding: '0 50px'}}>\n                    <Breadcrumb style={{margin: '16px 0'}}>\n                        <Breadcrumb.Item>Home</Breadcrumb.Item>\n                        <Breadcrumb.Item>库存管理</Breadcrumb.Item>\n                    </Breadcrumb>\n                    <div style={{background: '#fff', padding: 24, minHeight: 280}} id={\"stock-item-list\"}>\n                        {!this.state.stockItems && <div className=\"spin-div\"><Spin/></div>}\n                        {!!this.state.stockItems\n                        && this.state.stockItems.map(item =>\n                            <StockItem key={item.productCode}\n                                       name={item.name}\n                                       description={item.description}\n                                       ownedCount={item.ownedCount}\n                                       price={item.price}\n                                       loading={item.loading}\n                                       enlarged={this.state.enlargedProductCode === item.productCode}\n                                       hidden={!!this.state.enlargedProductCode && this.state.enlargedProductCode !== item.productCode}\n                                       onEnlarge={() => this.onEnlarge(item.productCode)}\n                                       onShrink={() => this.onShrink()}\n                                       onOrder={(count) => this.onOrder(item, count)}/>)}\n                    </div>\n                </Content>\n\n                <Balance balance={this.state.balance}/>\n                <Footer style={{textAlign: 'center'}}>Alipay ©2019 / a KubeCon DEMO</Footer>\n            </Layout>\n        );\n    }\n\n    static async initUser() {\n        const userName = localStorage[\"userName\"];\n        if (!userName) {\n            let userName = uuid();\n            await Service.createUser(userName);\n            localStorage[\"userName\"] = userName;\n            // message.success(\"已成功初始化新的用户。\");\n        }\n    }\n\n    onEnlarge(productCode) {\n        this.setState({enlargedProductCode: productCode}, () => {\n            const CONTAINER_PADDING = 24;\n            const FOOTER_HEIGHT = 105;\n            const TRANSITION_DURATION = 350;\n            const list = document.getElementById(\"stock-item-list\");\n            const listRect = list.getBoundingClientRect();\n            let enlargeIndex = -1;\n            const styleToApply = {};\n            for (let i = 0; i < list.children.length; i++) {\n                let rect = list.children[i].getBoundingClientRect();\n                if (list.children[i].className.indexOf(\"enlarged\") >= 0) {\n                    enlargeIndex = i;\n                    let marginTop = rect.y - listRect.y - CONTAINER_PADDING;\n                    let marginBottom = listRect.y + listRect.height - rect.y - rect.height - CONTAINER_PADDING;\n                    styleToApply[i] = `margin-top:${marginTop}px;margin-bottom:${marginBottom}px;height:${rect.height}px;`;\n                } else if (list.children[i].className.indexOf(\"hidden\") >= 0) {\n                    styleToApply[i] = `position:absolute; width:${rect.width}px; top:${rect.y}px`;\n                }\n            }\n\n            Object.keys(styleToApply).forEach(key => {\n                list.children[key].style = styleToApply[key];\n            });\n\n            if (enlargeIndex >= 0) {\n                this.recalcEnlargedElementStyle = () => {\n                    const TRANSITION_DURATION_TEXT = (TRANSITION_DURATION / 1000).toFixed(2) + \"s\";\n                    let height = document.body.clientHeight - listRect.y - CONTAINER_PADDING * 2 - FOOTER_HEIGHT;\n                    list.children[enlargeIndex].style = `transition: opacity ${TRANSITION_DURATION_TEXT}, margin-top ${TRANSITION_DURATION_TEXT}, margin-bottom ${TRANSITION_DURATION_TEXT}, height ${TRANSITION_DURATION_TEXT};margin-top:0; margin-bottom:0; height:${height}px`;\n                };\n                setTimeout(this.recalcEnlargedElementStyle, TRANSITION_DURATION / 3);\n            }\n        });\n    }\n\n    onShrink() {\n        this.recalcEnlargedElementStyle = null;\n        const list = document.getElementById(\"stock-item-list\");\n        for (let i = 0; i < list.children.length; i++) {\n            list.children[i].style = \"\";\n        }\n        this.setState({enlargedProductCode: null});\n    }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}